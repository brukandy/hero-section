<!-- CODICE PER ELEMENTOR - WIDGET HTML -->

<!-- Vimeo Player API -->
<script src="https://player.vimeo.com/api/player.js"></script>

<!-- Typeform Embed Script -->
<script src="//embed.typeform.com/next/embed.js"></script>

<!-- Iframe Hero Section -->
<iframe 
    src="https://brukandy.github.io/hero-section/" 
    width="100%" 
    height="800" 
    frameborder="0"
    allow="autoplay; fullscreen; picture-in-picture"
    style="border: none; display: block; margin: 0; padding: 0;">
</iframe>

<script>
// Auto-resize iframe based on content
window.addEventListener('message', function(e) {
    // Handle iframe height resize
    if (e.data.hasOwnProperty('heroHeight')) {
        var iframe = document.querySelector('iframe[src*="hero-section"]');
        if (iframe) {
            iframe.style.height = e.data.heroHeight + 'px';
        }
    }
    
    // Handle Typeform open request from iframe
    if (e.data.type === 'openTypeform' && e.data.formId) {
        console.log('Received Typeform open request:', e.data.formId);
        
        // Detect mobile
        var isMobile = window.innerWidth <= 768;
        var isPortrait = window.innerHeight > window.innerWidth;
        var tfSize = (isMobile && isPortrait) ? '100' : '50';
        
        console.log('Opening Typeform with size:', tfSize);
        
        // Create hidden button with Typeform attributes
        var button = document.createElement('button');
        button.setAttribute('data-tf-popup', e.data.formId);
        button.setAttribute('data-tf-size', tfSize);
        button.setAttribute('data-tf-opacity', '100');
        button.setAttribute('data-tf-medium', 'snippet');
        button.style.display = 'none';
        button.id = 'tf-trigger-' + Date.now();
        document.body.appendChild(button);
        
        // Wait for Typeform to initialize, then trigger
        setTimeout(function() {
            console.log('Clicking button to open Typeform');
            button.click();
            
            // Remove button after another delay
            setTimeout(function() {
                if (button.parentNode) {
                    document.body.removeChild(button);
                }
            }, 2000);
        }, 100);
    }
});
</script>

<style>
/* Remove Elementor padding/margins */
.elementor-widget-html {
    margin: 0 !important;
    padding: 0 !important;
}
.elementor-widget-container {
    margin: 0 !important;
    padding: 0 !important;
}
</style>
