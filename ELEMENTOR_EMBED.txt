<!-- CODICE PER ELEMENTOR - WIDGET HTML -->

<!-- Vimeo Player API -->
<script src="https://player.vimeo.com/api/player.js"></script>

<!-- Typeform Embed Script -->
<script src="//embed.typeform.com/next/embed.js"></script>

<!-- Iframe Hero Section -->
<iframe 
    src="https://brukandy.github.io/hero-section/" 
    width="100%" 
    height="800" 
    frameborder="0"
    allow="autoplay; fullscreen; picture-in-picture"
    style="border: none; display: block; margin: 0; padding: 0;">
</iframe>

<script>
// Auto-resize iframe based on content
window.addEventListener('message', function(e) {
    // Handle iframe height resize
    if (e.data.hasOwnProperty('heroHeight')) {
        var iframe = document.querySelector('iframe[src*="hero-section"]');
        if (iframe) {
            iframe.style.height = e.data.heroHeight + 'px';
        }
    }
    
    // Handle Typeform open request from iframe
    if (e.data.type === 'openTypeform' && e.data.formId) {
        console.log('Received Typeform open request:', e.data.formId);
        
        // Detect mobile
        var isMobile = window.innerWidth <= 768;
        var isPortrait = window.innerHeight > window.innerWidth;
        var tfSize = (isMobile && isPortrait) ? '100' : '50';
        
        console.log('Opening Typeform with size:', tfSize);
        
        // Create container for Typeform button
        var container = document.getElementById('tf-hero-container');
        if (!container) {
            container = document.createElement('div');
            container.id = 'tf-hero-container';
            container.style.display = 'none';
            document.body.appendChild(container);
        }
        
        // Create button with unique ID
        var buttonId = 'tf-hero-btn-' + Date.now();
        var button = document.createElement('button');
        button.id = buttonId;
        button.setAttribute('data-tf-popup', e.data.formId);
        button.setAttribute('data-tf-size', tfSize);
        button.setAttribute('data-tf-opacity', '100');
        button.setAttribute('data-tf-medium', 'snippet');
        button.textContent = 'Open';
        container.appendChild(button);
        
        // Wait for Typeform to auto-initialize the button, then click
        setTimeout(function() {
            console.log('Clicking Typeform button');
            var btn = document.getElementById(buttonId);
            if (btn) {
                btn.click();
                // Clean up after delay
                setTimeout(function() {
                    if (btn && btn.parentNode) {
                        btn.parentNode.removeChild(btn);
                    }
                }, 3000);
            }
        }, 500);
    }
});
</script>

<style>
/* Remove Elementor padding/margins */
.elementor-widget-html {
    margin: 0 !important;
    padding: 0 !important;
}
.elementor-widget-container {
    margin: 0 !important;
    padding: 0 !important;
}
</style>
